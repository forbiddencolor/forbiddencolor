{"version":3,"file":"app.js","sourceRoot":"","sources":["../../scripts/app.ts"],"names":["App","App.initialize","App.onDeviceReady","App.onDeviceReady.removeTouchHandler","App.onDeviceReady.endHandler","App.onDeviceReady.moveHandler","App.showRipple","App.resetRipples","App.renderRipple","App.waterRipple","App.animLoop","App.animLoop.timestamp","App.animLoop.loop","App.onPause","App.onResume"],"mappings":"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,EAAEA,CAACA,CAACA,CAACA;wBAC7BA,KAAKA,GAAGA,SAASA,CAACA,KAAKA,CAACA;wBACxBA,KAAKA,GAAGA,SAASA,CAACA,KAAKA,CAACA;wBAExBA,WAAWA,CAACA,KAAKA,EAAEA,KAAKA,EAAEA,EAAEA,EAAEA,GAAGA,CAACA,CAACA;oBACvCA,CAACA;oBAEDA,YAAYA,GAAGA,IAAIA,IAAIA,EAAEA,CAACA,OAAOA,EAAEA,CAACA;gBACxCA,CAACA;gBAEDH,WAAWA,CAACA,KAAKA,EAAEA,KAAKA,EAAEA,EAAEA,EAAEA,GAAGA,CAACA,CAACA;gBACnCA,CAACA,CAACA,MAAMA,CAACA,CAACA,EAAEA,CAACA,WAAWA,EAAEA,WAAWA,CAACA,CAACA,EAAEA,CAACA,UAAUA,EAAEA,UAAUA,CAACA,CAACA;YACtEA,CAACA,CAACA,CAACA;YAEHA,CAACA,CAACA,cAAcA,CAACA,CAACA,EAAEA,CAACA,YAAYA,EAAEA,UAAAA,CAACA;gBAChCA,CAACA,CAACA,cAAcA,EAAEA,CAACA;gBACnBA,CAACA,CAACA,eAAeA,EAAEA,CAACA;gBAEpBA,KAAKA,CAACA,KAAKA,EAAEA,CAACA;YAClBA,CAACA,CAACA,CAACA;YAEHA,KAAKA,CAACA,SAASA,CAACA,EAAEA,CAACA,UAAAA,CAACA;gBAChBA,CAACA,CAACA,4BAA4BA,CAACA,CAACA,IAAIA,CAACA,GAAGA,GAAGA,CAACA,CAACA,SAASA,CAACA,CAACA;gBAExDA,CAACA,CAACA,YAAYA,CAACA,CAACA,GAAGA,CAACA,SAASA,EAAEA,OAAOA,CAACA,CAACA;gBACxCA,CAACA,CAACA,YAAYA,CAACA,CAACA,QAAQA,CAACA,mBAAmBA,CAACA,CAACA;gBAC9CA,UAAUA,CAACA;oBACPA,CAACA,CAACA,YAAYA,CAACA,CAACA,GAAGA,CAACA,SAASA,EAAEA,MAAMA,CAACA,CAACA;gBAC3CA,CAACA,EAAEA,kBAAkBA,CAACA,CAACA;YAC3BA,CAACA,CAACA,CAACA;YAEHA,KAAKA,CAACA,SAASA,CAACA,EAAEA,CAACA,UAAAA,CAACA;gBAChBA,EAAEA,CAACA,CAACA,CAACA,CAACA,OAAOA,CAACA,CAACA,CAACA;oBACZA,IAAIA,KAAKA,GAAGA,CAACA,CAACA,gFAAgFA,CAACA,CAACA;oBAChGA,CAACA,CAACA,QAAQA,EAAEA,KAAKA,CAACA,CAACA,IAAIA,CAACA,IAAIA,CAACA,CAACA;oBAC9BA,CAACA,CAACA,YAAYA,CAACA,CAACA,MAAMA,CAACA,KAAKA,CAACA,CAACA;oBAC9BA,KAAKA,CAACA,QAAQA,CAACA,sBAAsBA,CAACA,CAACA;oBACvCA,KAAKA,CAACA,GAAGA,CAACA,8EAA8EA,EAAEA;wBACtF,KAAK,CAAC,MAAM,EAAE,CAAC;oBACnB,CAAC,CAACA,CAACA;gBACPA,CAACA;gBAACA,IAAIA,CAACA,CAACA;oBACJA,IAAIA,KAAKA,GAAGA,CAACA,CAACA,OAAOA,CAACA,CAACA;oBACvBA,IAAIA,GAAGA,GAAGA,CAACA,CAACA,2EAA2EA,CAACA,CAACA;oBACzFA,CAACA,CAACA,QAAQA,EAAEA,GAAGA,CAACA,CAACA,IAAIA,CAACA,MAAMA,CAACA,CAACA;oBAC9BA,KAAKA,CAACA,MAAMA,CAACA,GAAGA,CAACA,CAACA;oBAClBA,GAAGA,CAACA,QAAQA,CAACA,mBAAmBA,CAACA,CAACA;oBAClCA,GAAGA,CAACA,GAAGA,CAACA,8EAA8EA,EAAEA;wBACpF,GAAG,CAAC,MAAM,EAAE,CAAC;oBACjB,CAAC,CAACA,CAACA;oBAEHA,IAAIA,GAAGA,GAAGA,KAAKA,CAACA,QAAQA,EAAEA,EACtBA,OAAOA,GAAGA,CAACA,CAACA,MAAMA,CAACA,CAACA,UAAUA,EAAEA,GAAGA,CAACA,EACpCA,OAAOA,GAAGA,GAAGA,CAACA,GAAGA,CAACA;gBAE1BA,CAACA;gBAEDA,CAACA,CAACA,eAAeA,CAACA,CAACA,IAAIA,CAACA,KAAKA,CAACA,KAAKA,CAACA,CAACA;gBACrCA,CAACA,CAACA,MAAMA,CAACA,CAACA,GAAGA,CAACA,kBAAkBA,EAAEA,KAAKA,CAACA,YAAYA,CAACA,KAAKA,CAACA,CAACA;YAChEA,CAACA,CAACA,CAACA;YAEHA,KAAKA,CAACA,WAAWA,CAACA,EAAEA,CAACA,UAAAA,CAACA;gBAClBA,CAACA,CAACA,eAAeA,CAACA,CAACA,IAAIA,CAACA,KAAKA,CAACA,KAAKA,CAACA,CAACA;gBACrCA,CAACA,CAACA,eAAeA,CAACA,CAACA,IAAIA,CAACA,KAAKA,CAACA,QAAQA,CAACA,CAACA;gBACxCA,CAACA,CAACA,MAAMA,CAACA,CAACA,GAAGA,CAACA,kBAAkBA,EAAEA,KAAKA,CAACA,YAAYA,CAACA,KAAKA,CAACA,CAACA;gBAC5DA,CAACA,CAACA,cAAcA,CAACA,CAACA,IAAIA,EAAEA,CAACA;gBACzBA,CAACA,CAACA,wBAAwBA,CAACA,CAACA,IAAIA,CAACA,EAAEA,GAAGA,KAAKA,CAACA,YAAYA,CAACA,IAAIA,CAACA,CAACA;YACnEA,CAACA,CAACA,CAACA;YAEHA,KAAKA,CAACA,SAASA,CAACA,EAAEA,CAACA,UAAAA,CAACA;gBAChBA,CAACA,CAACA,eAAeA,CAACA,CAACA,IAAIA,CAACA,KAAKA,CAACA,KAAKA,CAACA,CAACA;gBACrCA,CAACA,CAACA,eAAeA,CAACA,CAACA,IAAIA,CAACA,KAAKA,CAACA,QAAQA,CAACA,CAACA;gBACxCA,CAACA,CAACA,cAAcA,CAACA,CAACA,IAAIA,EAAEA,CAACA;YAC7BA,CAACA,CAACA,CAACA;YAEHA,KAAKA,CAACA,YAAYA,CAACA,EAAEA,CAACA,UAAAA,CAACA;gBACnBA,EAAEA,CAACA,CAACA,KAAKA,CAACA,QAAQA,GAAGA,CAACA,CAACA,CAACA,CAACA;oBACrBA,CAACA,CAACA,eAAeA,CAACA,CAACA,IAAIA,CAACA,KAAKA,CAACA,QAAQA,CAACA,OAAOA,CAACA,CAACA,CAACA,CAACA,CAACA;gBACvDA,CAACA;gBAACA,IAAIA,CAACA,CAACA;oBACJA,CAACA,CAACA,eAAeA,CAACA,CAACA,IAAIA,CAACA,KAAKA,CAACA,QAAQA,CAACA,OAAOA,CAACA,CAACA,CAACA,CAACA,CAACA;gBACvDA,CAACA;YACLA,CAACA,CAACA,CAACA;YAEHA,KAAKA,CAACA,gBAAgBA,CAACA,EAAEA,CAACA,UAAAA,CAACA;gBACvBA,EAAEA,CAACA,CAACA,CAACA,CAACA,SAASA,GAAGA,CAACA,CAACA,CAACA,CAACA;oBAClBA,CAACA,CAACA,wBAAwBA,CAACA,CAACA,IAAIA,CAACA,uBAAuBA,GAAGA,KAAKA,CAACA,YAAYA,CAACA,IAAIA,CAACA,CAACA;oBACpFA,CAACA,CAACA,iBAAiBA,CAACA,CAACA,IAAIA,EAAEA,CAACA;gBAChCA,CAACA;gBAACA,IAAIA,CAACA,CAACA;oBACJA,CAACA,CAACA,iBAAiBA,CAACA,CAACA,QAAQA,CAACA,kBAAkBA,CAACA,CAACA;oBAClDA,YAAYA,EAAEA,CAACA;gBACnBA,CAACA;gBAEDA,IAAIA,IAAIA,GAAGA,CAACA,CAACA,SAASA,KAAKA,CAACA,GAAGA,IAAIA,GAAGA,CAACA,CAACA,SAASA,CAACA;gBAElDA,CAACA,CAACA,mBAAmBA,CAACA,CAACA,IAAIA,CAACA,IAAIA,CAACA,CAACA;gBAClCA,CAACA,CAACA,YAAYA,CAACA,CAACA,GAAGA,CAACA,SAASA,EAAEA,OAAOA,CAACA,CAACA;gBACxCA,CAACA,CAACA,YAAYA,CAACA,CAACA,QAAQA,CAACA,mBAAmBA,CAACA,CAACA;gBAC9CA,UAAUA,CAACA;oBACPA,CAACA,CAACA,YAAYA,CAACA,CAACA,GAAGA,CAACA,SAASA,EAAEA,MAAMA,CAACA,CAACA;gBAC3CA,CAACA,EAAEA,kBAAkBA,CAACA,CAACA;gBAEvBA,CAACA,CAACA,MAAMA,CAACA,CAACA,GAAGA,CAACA,kBAAkBA,EAAEA,KAAKA,CAACA,YAAYA,CAACA,KAAKA,CAACA,CAACA;YAChEA,CAACA,CAACA,CAACA;YAEHA,YAAYA,EAAEA,CAACA;YACfA,QAAQA,CAACA,YAAYA,CAACA,CAACA;QAC3BA,CAACA;QAEDF,oBAAoBA,KAAKA,EAAEA,KAAKA;YAC5BM,IAAIA,MAAMA,GAAGA,CAACA,CAACA,OAAOA,CAACA,CAACA;YACxBA,IAAIA,GAAGA,GAAGA,CAACA,CAACA,8BAA8BA,CAACA,CAACA;YAC5CA,uCAAuCA;YACvCA,yBAAyBA;YACzBA,mCAAmCA;YACnCA,0BAA0BA;YAE1BA,MAAMA,CAACA,MAAMA,CAACA,GAAGA,CAACA,CAACA;YAEnBA,EAAEA,CAACA,CAACA,CAACA,GAAGA,CAACA,MAAMA,EAAEA,IAAIA,CAACA,GAAGA,CAACA,KAAKA,EAAEA,CAACA,CAACA,CAACA;gBAChCA,IAAIA,CAACA,GAAGA,IAAIA,CAACA,GAAGA,CAACA,MAAMA,CAACA,UAAUA,EAAEA,EAAEA,MAAMA,CAACA,WAAWA,EAAEA,CAACA,CAACA;gBAC5DA,oCAAoCA;gBACpCA,8CAA8CA;gBAC9CA,GAAGA,CAACA,GAAGA,CAACA,EAAEA,MAAMA,EAAEA,CAACA,GAAGA,CAACA,EAAEA,KAAKA,EAAEA,CAACA,GAAGA,CAACA,EAAEA,CAACA,CAACA;YAC7CA,CAACA;YAEDA,IAAIA,CAACA,GAAGA,KAAKA,GAAGA,MAAMA,CAACA,MAAMA,EAAEA,CAACA,IAAIA,GAAGA,GAAGA,CAACA,KAAKA,EAAEA,GAAGA,CAACA,CAACA;YACvDA,IAAIA,CAACA,GAAGA,KAAKA,GAAGA,MAAMA,CAACA,MAAMA,EAAEA,CAACA,GAAGA,GAAGA,GAAGA,CAACA,MAAMA,EAAEA,GAAGA,CAACA,CAACA;YAEvDA,GAAGA,CAACA,GAAGA,CAACA,EAAEA,GAAGA,EAAEA,CAACA,GAAGA,IAAIA,EAAEA,IAAIA,EAAEA,CAACA,GAAGA,IAAIA,EAAEA,CAACA,CAACA,QAAQA,CAACA,MAAMA,CAACA,CAACA;YAC5DA,GAAGA,CAACA,GAAGA,CAACA,8DAA8DA,EAAEA;gBACpE,CAAC,CAAC,IAAI,CAAC,CAAC,MAAM,EAAE,CAAC;YACrB,CAAC,CAACA,CAACA;QACPA,CAACA;QAEDN;YACIO,CAACA,CAACA,MAAMA,CAACA,CAACA,OAAOA,CAACA,SAASA,CAACA,CAACA;YAE7BA,CAACA,CAACA,MAAMA,CAACA,CAACA,OAAOA,CAACA;gBACdA,UAAUA,EAAEA,GAAGA;gBACfA,WAAWA,EAAEA,KAAKA;aACrBA,CAACA,CAACA;QACPA,CAACA;QAEDP,IAAIA,aAAaA,GAAGA,EAAEA,CAACA;QAEvBA;YACIQ,EAAEA,CAACA,CAACA,aAAaA,CAACA,MAAMA,GAAGA,CAACA,CAACA,CAACA,CAACA;gBAC3BA,IAAIA,MAAMA,GAAGA,aAAaA,CAACA,GAAGA,EAAEA,CAACA;gBACjCA,aAAaA,GAAGA,EAAEA,CAACA;gBACnBA,CAACA,CAACA,MAAMA,CAACA,CAACA,OAAOA,CAACA,MAAMA,EAAEA,MAAMA,CAACA,CAACA,EAAEA,MAAMA,CAACA,CAACA,EAAEA,MAAMA,CAACA,MAAMA,EAAEA,MAAMA,CAACA,QAAQA,CAACA,CAACA;YAClFA,CAACA;QACLA,CAACA;QAEDR,qBAAqBA,CAASA,EAAEA,CAASA,EAAEA,MAAcA,EAAEA,QAAgBA;YACvES,aAAaA,CAACA,IAAIA,CAACA,EAAEA,GAAAA,CAACA,EAAEA,GAAAA,CAACA,EAAEA,QAAAA,MAAMA,EAAEA,UAAAA,QAAQA,EAAEA,CAACA,CAACA;QACnDA,CAACA;QAEDT,kBAAkBA,MAAgBA,EAAEA,KAA2BA,EAAEA,KAAmBA;YAAhDU,qBAA2BA,GAA3BA,SAAiBA,IAAIA,GAAGA,EAAEA,CAACA;YAAEA,qBAAmBA,GAAnBA,WAAmBA;YAChFA;gBACIC,MAAMA,CAACA,MAAMA,CAACA,WAAWA,IAAIA,MAAMA,CAACA,WAAWA,CAACA,GAAGA,GAAGA,MAAMA,CAACA,WAAWA,CAACA,GAAGA,EAAEA,GAAGA,CAACA,IAAIA,IAAIA,CAACA;YAC/FA,CAACA;YAEDD,IAAIA,OAAOA,EAAEA,SAASA,GAAGA,SAASA,EAAEA,EAChCA,GAAGA,GAAGA,MAAMA,CAACA,qBAAqBA,EAClCA,IAAIA,GAAGA,IAAIA,CAACA;YAChBA,cAAcA,GAAGA;gBACbE,EAAEA,CAACA,CAACA,OAAOA,KAAKA,KAAKA,CAACA,CAACA,CAACA;oBACpBA,GAAGA,CAACA,IAAIA,CAACA,CAACA;oBACVA,IAAIA,OAAOA,GAAGA,IAAIA,CAACA,GAAGA,CAACA,IAAIA,EAAEA,GAAGA,GAAGA,SAASA,CAACA,CAACA;oBAE9CA,EAAEA,CAACA,CAACA,CAACA,KAAKA,IAAIA,CAACA,IAAIA,OAAOA,GAAGA,KAAKA,CAACA,IAAIA,OAAOA,GAAGA,KAAKA,CAACA,CAACA,CAACA;wBACrDA,SAASA,GAAGA,GAAGA,GAAGA,CAACA,OAAOA,GAAGA,KAAKA,CAACA,CAACA;wBACpCA,OAAOA,GAAGA,MAAMA,CAACA,IAAIA,CAACA,IAAIA,CAACA,CAACA,OAAOA,CAACA,CAACA;oBACzCA,CAACA;gBACLA,CAACA;YACLA,CAACA;YAEDF,IAAIA,CAACA,SAASA,CAACA,CAACA;QACpBA,CAACA;QAEDV;YACIa,0EAA0EA;QAC9EA,CAACA;QAEDb;YACIc,+EAA+EA;QACnFA,CAACA;IAELd,CAACA,EAlQM,GAAG,KAAH,GAAG,QAkQT;IAED,OAAS,GAAG,CAAC","sourcesContent":["/// <reference path=\"typings/jquery/jquery.d.ts\" />\r\n/// <reference path=\"typings/jquery.ripples/jquery.ripples.d.ts\" />\r\n\r\nimport {Frame} from \"./Frame\";\r\nimport * as $ from \"jquery\";\r\n\r\nmodule App {\r\n    export function initialize() {\r\n        document.addEventListener(\"deviceready\", onDeviceReady, false);\r\n    }\r\n\r\n    function onDeviceReady() {\r\n        // Handle the Cordova pause and resume events\r\n        document.addEventListener(\"pause\", onPause, false);\r\n        document.addEventListener(\"resume\", onResume, false);\r\n\r\n        var popupmesssagedelay = 750;\r\n\r\n        var frame = new Frame();\r\n\r\n        $(\"body\").css(\"background-color\", frame.CurrentColor.color);\r\n        // $(\"#score > span\").text(frame.Score);\r\n        // $(\"#timer > span\").text(frame.TimeLeft);\r\n\r\n        $(\"body\").on(\"touchstart\", (e: any) => {\r\n            e.preventDefault();\r\n            \r\n            // if (!frame.IsStarted) return;\r\n\r\n            if (!e.originalEvent.touches || e.originalEvent.touches.length === 0) return;\r\n\r\n            var touchStart = e.originalEvent.touches[0],\r\n                startX = touchStart.pageX,\r\n                startY = touchStart.pageY,\r\n                lastX = startX,\r\n                lastY = startY,\r\n                touchStartTime = new Date().getTime(),\r\n                lastMoveTime = touchStartTime;\r\n\r\n            function removeTouchHandler() {\r\n                $(\"body\").off(\"touchmove\", moveHandler).off(\"touchend\", endHandler);\r\n            };\r\n\r\n            function endHandler(endEvent) {\r\n                var timeDiff = new Date().getTime() - lastMoveTime;\r\n                removeTouchHandler();\r\n\r\n                if (timeDiff < 1000\r\n                    && (Math.abs(lastX - startX) > 50 ||\r\n                        Math.abs(lastY - startY) > 50)) {\r\n                    if (frame.IsStarted) {\r\n                        frame.swipe();\r\n                        // waterRipple(lastX, lastY, 20, 0.2);\r\n                    }\r\n\r\n                    //for (var x = startX, y = startY; x < lastX && y < lastY; x += 5, y += 5) {\r\n                    //    showRipple(x, y);\r\n                    //}\r\n\r\n                    // showRipple(startX, startY);\r\n                    // showRipple(lastX - ((lastX - startX) / 2), lastY - ((lastY - startY) / 2));\r\n                    // showRipple(lastX, lastY);\r\n                } else {\r\n                    if (frame.IsStarted) {\r\n                        frame.tap();\r\n                    }\r\n\r\n                    waterRipple(lastX, lastY, 20, 0.2);\r\n                }\r\n            };\r\n\r\n            function moveHandler(moveEvent) {\r\n                var touchMove = moveEvent.originalEvent.touches[0],\r\n                    movedX = Math.abs(touchMove.pageX - lastX),\r\n                    movedY = Math.abs(touchMove.pageY - lastY),\r\n                    timeDiff = new Date().getTime() - lastMoveTime;\r\n\r\n                if (movedX > 30 || movedY > 30) {\r\n                    lastX = touchMove.pageX;\r\n                    lastY = touchMove.pageY;\r\n\r\n                    waterRipple(lastX, lastY, 20, 0.2);\r\n                }\r\n\r\n                lastMoveTime = new Date().getTime();\r\n            }\r\n\r\n            waterRipple(lastX, lastY, 20, 0.2);\r\n            $(\"body\").on(\"touchmove\", moveHandler).on(\"touchend\", endHandler);\r\n        });\r\n\r\n        $(\"#startbutton\").on(\"touchstart\", e => {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n\r\n            frame.start();\r\n        });\r\n\r\n        frame.TimeBonus.on(x => {\r\n            $(\"#timebonus .message > span\").text(\"+\" + x.ExtraTime);\r\n\r\n            $(\"#timebonus\").css(\"display\", \"block\");\r\n            $(\"#timebonus\").addClass(\"animated bounceIn\");\r\n            setTimeout(() => {\r\n                $(\"#timebonus\").css(\"display\", \"none\");\r\n            }, popupmesssagedelay);\r\n        });\r\n\r\n        frame.NextFrame.on(x => {\r\n            if (x.Correct) {\r\n                var score = $('<div class=\"plusscore popupmessage\" style=\"display: block\"><span></span></div>');\r\n                $(\"> span\", score).text(\"+1\");\r\n                $(\"#plusscore\").append(score);\r\n                score.addClass(\"animated fadeOutDown\");\r\n                score.one(\"webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend\", function () {\r\n                    score.remove();\r\n                });\r\n            } else {\r\n                var $oops = $(\"#oops\");\r\n                var msg = $('<div class=\"oops popupmessage\" style=\"display: block\"><span></span></div>');\r\n                $(\"> span\", msg).text(\"OOPS\");\r\n                $oops.append(msg);\r\n                msg.addClass(\"animated bounceIn\");\r\n                msg.one(\"webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend\", function () {\r\n                    msg.remove();\r\n                });\r\n\r\n                var pos = $oops.position(),\r\n                    rippleX = $('body').outerWidth() / 2,\r\n                    rippleY = pos.top;\r\n                // showRipple(rippleX, rippleY);\r\n            }\r\n\r\n            $(\"#score > span\").text(frame.Score);\r\n            $(\"body\").css(\"background-color\", frame.CurrentColor.color);\r\n        });\r\n\r\n        frame.GameStarted.on(e => {\r\n            $(\"#score > span\").text(frame.Score);\r\n            $(\"#timer > span\").text(frame.TimeLeft);\r\n            $(\"body\").css(\"background-color\", frame.CurrentColor.color);\r\n            $(\"#startscreen\").hide();\r\n            $(\"#currentforbiddencolor\").html(\"\" + frame.CurrentColor.name);\r\n        });\r\n\r\n        frame.GameEnded.on(e => {\r\n            $(\"#score > span\").text(frame.Score);\r\n            $(\"#timer > span\").text(frame.TimeLeft);\r\n            $(\"#startscreen\").show();\r\n        });\r\n\r\n        frame.TimerUpdated.on(e => {\r\n            if (frame.TimeLeft < 3) {\r\n                $(\"#timer > span\").text(frame.TimeLeft.toFixed(1));\r\n            } else {\r\n                $(\"#timer > span\").text(frame.TimeLeft.toFixed(0));\r\n            }\r\n        });\r\n\r\n        frame.CountDownUpdated.on(e => {\r\n            if (e.CountDown > 0) {\r\n                $('#forbiddencolor > span').html('Forbidden color<br />' + frame.CurrentColor.name);\r\n                $(\"#forbiddencolor\").show();\r\n            } else {\r\n                $(\"#forbiddencolor\").addClass(\"animated fadeOut\");\r\n                resetRipples();\r\n            }\r\n\r\n            var text = e.CountDown === 0 ? \"Go\" : e.CountDown;\r\n\r\n            $(\"#countdown > span\").text(text);\r\n            $(\"#countdown\").css(\"display\", \"block\");\r\n            $(\"#countdown\").addClass(\"animated bounceIn\");\r\n            setTimeout(() => {\r\n                $(\"#countdown\").css(\"display\", \"none\");\r\n            }, popupmesssagedelay);\r\n\r\n            $(\"body\").css(\"background-color\", frame.CurrentColor.color);\r\n        });\r\n\r\n        resetRipples();\r\n        animLoop(renderRipple);\r\n    }\r\n\r\n    function showRipple(pageX, pageY) {\r\n        var target = $(\"#page\");\r\n        var ink = $(\"<span class='ripple'></span>\");\r\n        //if (target.find(\".ink\").length === 0)\r\n        //    target.append(ink);\r\n        //var ink = target.find(\".ripple\");\r\n        //ink.removeClass(\"show\");\r\n\r\n        target.append(ink);\r\n\r\n        if (!ink.height() && !ink.width()) {\r\n            var d = Math.max(target.outerWidth(), target.outerHeight());\r\n            // ink.css({ height: d, width: d });\r\n            // ink.css({ height: '50px', width: '50px' });\r\n            ink.css({ height: d / 2, width: d / 2 });\r\n        }\r\n\r\n        var x = pageX - target.offset().left - ink.width() / 2;\r\n        var y = pageY - target.offset().top - ink.height() / 2;\r\n\r\n        ink.css({ top: y + 'px', left: x + 'px' }).addClass(\"show\");\r\n        ink.one('animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd', function () {\r\n            $(this).remove();\r\n        });\r\n    }\r\n\r\n    function resetRipples() {\r\n        $(\"body\").ripples(\"destroy\");\r\n\r\n        $(\"body\").ripples({\r\n            resolution: 384,\r\n            interactive: false\r\n        });\r\n    }\r\n\r\n    var currentRipple = [];\r\n\r\n    function renderRipple() {\r\n        if (currentRipple.length > 0) {\r\n            var ripple = currentRipple.pop();\r\n            currentRipple = [];\r\n            $(\"body\").ripples(\"drop\", ripple.x, ripple.y, ripple.radius, ripple.strength);\r\n        }\r\n    }\r\n\r\n    function waterRipple(x: number, y: number, radius: number, strength: number) {\r\n        currentRipple.push({ x, y, radius, strength });\r\n    }\r\n\r\n    function animLoop(render: Function, speed: number = (1000 / 30), clamp: number = 500) {\r\n        function timestamp() {\r\n            return window.performance && window.performance.now ? window.performance.now() : +new Date;\r\n        }\r\n\r\n        var running, lastFrame = timestamp(),            \r\n            raf = window.requestAnimationFrame,\r\n            that = this;\r\n        function loop(now) {\r\n            if (running !== false) {\r\n                raf(loop);\r\n                var elapsed = Math.min(1000, now - lastFrame);\r\n\r\n                if ((speed <= 0 || elapsed > speed) && elapsed < clamp) {\r\n                    lastFrame = now - (elapsed % speed);\r\n                    running = render.bind(that)(elapsed);\r\n                }\r\n            }\r\n        }\r\n\r\n        loop(lastFrame);\r\n    }\r\n\r\n    function onPause() {\r\n        // TODO: This application has been suspended. Save application state here.\r\n    }\r\n\r\n    function onResume() {\r\n        // TODO: This application has been reactivated. Restore application state here.\r\n    }\r\n\r\n}\r\n\r\nexport = App;"]}