{"version":3,"file":"app.js","sourceRoot":"","sources":["../../scripts/app.ts"],"names":["App","App.initialize","App.onDeviceReady","App.onDeviceReady.removeTouchHandler","App.onDeviceReady.endHandler","App.onDeviceReady.moveHandler","App.showTouch","App.resetRipples","App.renderRipple","App.waterRipple","App.animLoop","App.animLoop.timestamp","App.animLoop.loop","App.onPause","App.onResume"],"mappings":"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AAA;wBACnBA,IAAIA,KAAKA,GAAGA,CAACA,CAACA,OAAOA,CAACA,CAACA;wBACvBA,IAAIA,GAAGA,GAAGA,CAACA,CAACA,2EAA2EA,CAACA,CAACA;wBACzFA,CAACA,CAACA,QAAQA,EAAEA,GAAGA,CAACA,CAACA,IAAIA,CAACA,MAAMA,CAACA,CAACA;wBAC9BA,KAAKA,CAACA,MAAMA,CAACA,GAAGA,CAACA,CAACA;wBAClBA,GAAGA,CAACA,QAAQA,CAACA,mBAAmBA,CAACA,CAACA;wBAClCA,GAAGA,CAACA,GAAGA,CAACA,8EAA8EA,EAAEA;4BACpFA,GAAGA,CAACA,MAAMA,EAAEA,CAACA;4BACbA,iBAAiBA,EAAEA,CAACA;wBACxBA,CAACA,CAACA,CAACA;oBACPA,CAACA;gBACLA,CAACA;gBAEDA,CAACA,CAACA,eAAeA,CAACA,CAACA,IAAIA,CAACA,KAAKA,CAACA,KAAKA,CAACA,QAAQA,EAAEA,CAACA,CAACA;gBAChDA,CAACA,CAACA,MAAMA,CAACA,CAACA,GAAGA,CAACA,kBAAkBA,EAAEA,KAAKA,CAACA,YAAYA,CAACA,KAAKA,CAACA,CAACA;YAChEA,CAACA,CAACA,CAACA;YAEHA,KAAKA,CAACA,WAAWA,CAACA,EAAEA,CAACA,UAAAA,CAACA;gBAClBA,CAACA,CAACA,eAAeA,CAACA,CAACA,IAAIA,CAACA,KAAKA,CAACA,KAAKA,CAACA,QAAQA,EAAEA,CAACA,CAACA;gBAChDA,CAACA,CAACA,eAAeA,CAACA,CAACA,IAAIA,CAACA,KAAKA,CAACA,QAAQA,CAACA,QAAQA,EAAEA,CAACA,CAACA;gBACnDA,CAACA,CAACA,MAAMA,CAACA,CAACA,GAAGA,CAACA,kBAAkBA,EAAEA,KAAKA,CAACA,YAAYA,CAACA,KAAKA,CAACA,CAACA;gBAC5DA,CAACA,CAACA,cAAcA,CAACA,CAACA,IAAIA,EAAEA,CAACA;gBACzBA,CAACA,CAACA,wBAAwBA,CAACA,CAACA,IAAIA,CAACA,EAAEA,GAAGA,KAAKA,CAACA,YAAYA,CAACA,IAAIA,CAACA,CAACA;YACnEA,CAACA,CAACA,CAACA;YAEHA,KAAKA,CAACA,SAASA,CAACA,EAAEA,CAACA,UAAAA,CAACA;gBAChBA,CAACA,CAACA,eAAeA,CAACA,CAACA,IAAIA,CAACA,KAAKA,CAACA,KAAKA,CAACA,QAAQA,EAAEA,CAACA,CAACA;gBAChDA,CAACA,CAACA,eAAeA,CAACA,CAACA,IAAIA,CAACA,KAAKA,CAACA,QAAQA,CAACA,QAAQA,EAAEA,CAACA,CAACA;gBACnDA,CAACA,CAACA,cAAcA,CAACA,CAACA,IAAIA,EAAEA,CAACA;YAC7BA,CAACA,CAACA,CAACA;YAEHA,KAAKA,CAACA,YAAYA,CAACA,EAAEA,CAACA,UAAAA,CAACA;gBACnBA,EAAEA,CAACA,CAACA,KAAKA,CAACA,QAAQA,GAAGA,CAACA,CAACA,CAACA,CAACA;oBACrBA,CAACA,CAACA,eAAeA,CAACA,CAACA,IAAIA,CAACA,KAAKA,CAACA,QAAQA,CAACA,OAAOA,CAACA,CAACA,CAACA,CAACA,CAACA;gBACvDA,CAACA;gBAACA,IAAIA,CAACA,CAACA;oBACJA,CAACA,CAACA,eAAeA,CAACA,CAACA,IAAIA,CAACA,KAAKA,CAACA,QAAQA,CAACA,OAAOA,CAACA,CAACA,CAACA,CAACA,CAACA;gBACvDA,CAACA;YACLA,CAACA,CAACA,CAACA;YAEHA,KAAKA,CAACA,gBAAgBA,CAACA,EAAEA,CAACA,UAAAA,CAACA;gBACvBA,EAAEA,CAACA,CAACA,CAACA,CAACA,SAASA,GAAGA,CAACA,CAACA,CAACA,CAACA;oBAClBA,CAACA,CAACA,wBAAwBA,CAACA,CAACA,IAAIA,CAACA,uBAAuBA,GAAGA,KAAKA,CAACA,YAAYA,CAACA,IAAIA,CAACA,CAACA;oBACpFA,CAACA,CAACA,iBAAiBA,CAACA,CAACA,WAAWA,CAACA,kBAAkBA,CAACA,CAACA;oBACrDA,CAACA,CAACA,iBAAiBA,CAACA,CAACA,IAAIA,EAAEA,CAACA;gBAChCA,CAACA;gBAACA,IAAIA,CAACA,CAACA;oBAC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","sourcesContent":["/// <reference path=\"typings/jquery/jquery.d.ts\" />\r\n\r\nimport {Frame} from \"./Frame\";\r\nimport * as $ from \"jquery\";\r\n\r\n// import * as $ from \"zepto\";\r\n// import $ = require(\"zepto\");\r\n// var $ = require(\"zepto\");\r\n\r\nmodule App {\r\n    export var shouldRenderRipples = false;\r\n    export var shouldRenderTouches = false;\r\n\r\n    export function initialize() {\r\n        document.addEventListener(\"deviceready\", onDeviceReady, false);\r\n    }\r\n\r\n    function onDeviceReady() {\r\n        // Handle the Cordova pause and resume events\r\n        document.addEventListener(\"pause\", onPause, false);\r\n        document.addEventListener(\"resume\", onResume, false);\r\n\r\n        var popupmesssagedelay = 750;\r\n        var frame = new Frame();\r\n\r\n        $(\"body\").css(\"background-color\", frame.CurrentColor.color);\r\n        // $(\"#score > span\").text(frame.Score);\r\n        // $(\"#timer > span\").text(frame.TimeLeft);\r\n\r\n        $(\"body\").on('touchstart', (e: any) => {\r\n            e.preventDefault();\r\n            \r\n            // if (!frame.IsStarted) return;\r\n\r\n            if (!e.originalEvent.touches || e.originalEvent.touches.length === 0) return true;\r\n\r\n            var touchStart = e.originalEvent.touches[0],\r\n                startX: number = touchStart.pageX,\r\n                startY: number = touchStart.pageY,\r\n                lastX = startX,\r\n                lastY = startY,\r\n                touchStartTime = new Date().getTime(),\r\n                lastMoveTime = touchStartTime;\r\n\r\n            function removeTouchHandler() {\r\n                $(\"body\").off(\"touchmove\", moveHandler).off(\"touchend\", endHandler);\r\n            };\r\n\r\n            function endHandler(endEvent): boolean {\r\n                var timeDiff = new Date().getTime() - lastMoveTime;\r\n                removeTouchHandler();\r\n\r\n                if (timeDiff < 1000\r\n                    && (Math.abs(lastX - startX) > 50 ||\r\n                        Math.abs(lastY - startY) > 50)) {\r\n                    if (frame.IsStarted) {\r\n                        frame.swipe();\r\n                    }\r\n\r\n                    //showTouch(startX, startY);\r\n                    //showTouch(lastX - ((lastX - startX) / 2), lastY - ((lastY - startY) / 2));\r\n                    //showTouch(lastX, lastY);\r\n                } else {\r\n                    if (frame.IsStarted) {\r\n                        frame.tap();\r\n                    }\r\n\r\n                    waterRipple(lastX, lastY);\r\n                }\r\n\r\n                return true;\r\n            };\r\n\r\n            function moveHandler(moveEvent): boolean {\r\n                var touchMove = moveEvent.originalEvent.touches[0],\r\n                    movedX = Math.abs(touchMove.pageX - lastX),\r\n                    movedY = Math.abs(touchMove.pageY - lastY),\r\n                    timeDiff = new Date().getTime() - lastMoveTime;\r\n\r\n                if (movedX > 60 || movedY > 60) {\r\n                    lastX = touchMove.pageX;\r\n                    lastY = touchMove.pageY;\r\n\r\n                    waterRipple(lastX, lastY);\r\n                    showTouch(lastX, lastY);\r\n                }\r\n\r\n                lastMoveTime = new Date().getTime();\r\n\r\n                return true;\r\n            }\r\n\r\n            waterRipple(lastX, lastY);\r\n            showTouch(lastX, lastY);\r\n            $(\"body\").on('touchmove', moveHandler).on(\"touchend\", endHandler);\r\n            return true;\r\n        });\r\n\r\n        $(\"#startbutton\").on(\"touchstart\", e => {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n\r\n            frame.start();\r\n            return true;\r\n        });\r\n\r\n        frame.TimeBonus.on(x => {\r\n            $(\"#timebonus .message > span\").text(\"+\" + x.ExtraTime);\r\n\r\n            $(\"#timebonus\").removeClass(\"animated bounceIn\");\r\n            $(\"#timebonus\").css(\"display\", \"block\");\r\n            $(\"#timebonus\").addClass(\"animated bounceIn\");\r\n            setTimeout(() => {\r\n                $(\"#timebonus\").css(\"display\", \"none\");\r\n            }, popupmesssagedelay);\r\n        });\r\n\r\n        var popupMessageCount = 0;\r\n        var lastScoreTime = +new Date;\r\n        frame.NextFrame.on(x => {\r\n            if (x.Correct) {\r\n                var now = +new Date;\r\n                var delta = now - lastScoreTime;\r\n                if (delta > 180) {\r\n                    lastScoreTime = now;\r\n                    var score = $('<div class=\"plusscore popupmessage\" style=\"display: block\"><span></span></div>');\r\n                    $(\"> span\", score).text(\"+1\");\r\n                    $(\"#plusscore\").append(score);\r\n                    score.addClass(\"animated fadeOutDown\");\r\n                    score.one(\"webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend\", () => {\r\n                        score.remove();\r\n                    });                    \r\n                }\r\n            } else {\r\n                if (popupMessageCount < 3) {\r\n                    popupMessageCount++\r\n                    var $oops = $(\"#oops\");\r\n                    var msg = $('<div class=\"oops popupmessage\" style=\"display: block\"><span></span></div>');\r\n                    $(\"> span\", msg).text(\"OOPS\");\r\n                    $oops.append(msg);\r\n                    msg.addClass(\"animated bounceIn\");\r\n                    msg.one(\"webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend\", () => {\r\n                        msg.remove();\r\n                        popupMessageCount--;\r\n                    });\r\n                }\r\n            }\r\n\r\n            $(\"#score > span\").text(frame.Score.toString());\r\n            $(\"body\").css(\"background-color\", frame.CurrentColor.color);\r\n        });\r\n\r\n        frame.GameStarted.on(e => {\r\n            $(\"#score > span\").text(frame.Score.toString());\r\n            $(\"#timer > span\").text(frame.TimeLeft.toString());\r\n            $(\"body\").css(\"background-color\", frame.CurrentColor.color);\r\n            $(\"#startscreen\").hide();\r\n            $(\"#currentforbiddencolor\").html(\"\" + frame.CurrentColor.name);\r\n        });\r\n\r\n        frame.GameEnded.on(e => {\r\n            $(\"#score > span\").text(frame.Score.toString());\r\n            $(\"#timer > span\").text(frame.TimeLeft.toString());\r\n            $(\"#startscreen\").show();\r\n        });\r\n\r\n        frame.TimerUpdated.on(e => {\r\n            if (frame.TimeLeft < 3) {\r\n                $(\"#timer > span\").text(frame.TimeLeft.toFixed(1));\r\n            } else {\r\n                $(\"#timer > span\").text(frame.TimeLeft.toFixed(0));\r\n            }\r\n        });\r\n\r\n        frame.CountDownUpdated.on(e => {\r\n            if (e.CountDown > 0) {\r\n                $('#forbiddencolor > span').html('Forbidden color<br />' + frame.CurrentColor.name);\r\n                $(\"#forbiddencolor\").removeClass(\"animated fadeOut\");\r\n                $(\"#forbiddencolor\").show();\r\n            } else {\r\n                $(\"#forbiddencolor\").addClass(\"animated fadeOut\");\r\n                resetRipples();\r\n            }\r\n\r\n            var text = e.CountDown === 0 ? \"Go\" : e.CountDown.toString();\r\n\r\n            $(\"#countdown > span\").text(text);\r\n            $(\"#countdown\").css(\"display\", \"block\");\r\n            $(\"#countdown\").addClass(\"animated bounceIn\");\r\n            setTimeout(() => {\r\n                $(\"#countdown\").css(\"display\", \"none\");\r\n            }, popupmesssagedelay);\r\n\r\n            $(\"body\").css(\"background-color\", frame.CurrentColor.color);\r\n        });\r\n\r\n        resetRipples();\r\n        if (shouldRenderRipples) {\r\n            animLoop(renderRipple);\r\n        }\r\n    }\r\n\r\n    function showTouch(pageX, pageY) {\r\n        if (!shouldRenderTouches) return;\r\n\r\n        var target = $(\"#page\");\r\n        var ink = $(\"<div class='ripple'></div>\");\r\n        //if (target.find(\".ink\").length === 0)\r\n        //    target.append(ink);\r\n        //var ink = target.find(\".ripple\");\r\n        //ink.removeClass(\"show\");\r\n\r\n        target.append(ink);\r\n\r\n        var d = Math.max(target.width(), target.height());\r\n        ink.css({ height: d / 2, width: d / 2 });\r\n\r\n        var x = pageX - target.offset().left - ink.width() / 2;\r\n        var y = pageY - target.offset().top - ink.height() / 2;\r\n\r\n        ink.one('animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd', function () {\r\n            $(this).remove();\r\n        });\r\n\r\n        setTimeout(() => {\r\n                ink.css({ top: y + 'px', left: x + 'px' }).addClass(\"show\");\r\n            }, 0);\r\n    }\r\n\r\n    function resetRipples() {\r\n        if (!shouldRenderRipples) return;\r\n\r\n        $(\"body\").ripples(\"destroy\");\r\n\r\n        $(\"body\").ripples({\r\n            resolution: 512,\r\n            interactive: false\r\n        });\r\n    }\r\n\r\n    var currentRipple = [];\r\n\r\n    function renderRipple() {\r\n        if (currentRipple.length > 0) {\r\n            var ripple = currentRipple.pop();\r\n            currentRipple = [];\r\n            $(\"body\").ripples(\"drop\", ripple.x, ripple.y, ripple.radius, ripple.strength);\r\n        }\r\n    }\r\n\r\n    function waterRipple(x: number, y: number, radius: number = 10, strength: number = 0.06) {\r\n        if (!shouldRenderRipples) return;\r\n\r\n        currentRipple.push({ x, y, radius, strength});\r\n    }\r\n\r\n    function animLoop(render: Function, speed: number = (1000 / 30)) {\r\n        function timestamp() {\r\n            return window.performance && window.performance.now ? window.performance.now() : +new Date;\r\n        }\r\n\r\n        var running, lastFrame = timestamp(),\r\n            raf = window.requestAnimationFrame,\r\n            that = this;\r\n        function loop(now) {\r\n            if (running !== false) {\r\n                raf(loop);\r\n                var elapsed = Math.min(1000, now - lastFrame);\r\n\r\n                if (speed <= 0 || elapsed > speed) {\r\n                    lastFrame = now - (elapsed % speed);\r\n                    running = render.bind(that)(elapsed);\r\n                }\r\n            }\r\n        }\r\n\r\n        loop(lastFrame);\r\n    }\r\n\r\n    function onPause() {\r\n        // TODO: This application has been suspended. Save application state here.\r\n    }\r\n\r\n    function onResume() {\r\n        // TODO: This application has been reactivated. Restore application state here.\r\n    }\r\n\r\n}\r\n\r\nexport = App;"]}