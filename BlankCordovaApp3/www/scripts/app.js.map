{"version":3,"file":"app.js","sourceRoot":"","sources":["../../scripts/app.ts"],"names":["App","App.initialize","App.onDeviceReady","App.onDeviceReady.removeTouchHandler","App.onDeviceReady.endHandler","App.onDeviceReady.moveHandler","App.resetRipples","App.ripple","App.waterRipple","App.animLoop","App.animLoop.loop","App.onPause","App.onResume"],"mappings":"AAAA,mDAAmD;AACnD,mEAAmE;AACnE,mDAAmD;;IAKnD,IAAO,GAAG,CAsOT;IAtOD,WAAO,GAAG,EAAC,CAAC;QACRA,IAAIA,cAAcA,GAAGA,CAACA,CAACA;QACvBA,IAAIA,UAAUA,GAAGA,EAAEA,CAACA;QACpBA,IAAIA,UAAUA,GAAGA,KAAKA,CAACA;QACvBA,IAAIA,aAAaA,GAAGA,IAAIA,CAACA;QAEzBA;YACIC,QAAQA,CAACA,gBAAgBA,CAACA,aAAaA,EAAEA,aAAaA,EAAEA,KAAKA,CAACA,CAACA;QACnEA,CAACA;QAFeD,cAAUA,aAEzBA,CAAAA;QAEDA;YACIE,6CAA6CA;YAC7CA,QAAQA,CAACA,gBAAgBA,CAACA,OAAOA,EAAEA,OAAOA,EAAEA,KAAKA,CAACA,CAACA;YACnDA,QAAQA,CAACA,gBAAgBA,CAACA,QAAQA,EAAEA,QAAQA,EAAEA,KAAKA,CAACA,CAACA;YAErDA,IAAIA,kBAAkBA,GAAGA,GAAGA,CAACA;YAE7BA,IAAIA,KAAKA,GAAGA,IAAIA,aAAKA,EAAEA,CAACA;YAExBA,CAACA,CAACA,MAAMA,CAACA,CAACA,GAAGA,CAACA,kBAAkBA,EAAEA,KAAKA,CAACA,YAAYA,CAACA,KAAKA,CAACA,CAACA;YAC5DA,wCAAwCA;YACxCA,2CAA2CA;YAE3CA,CAACA,CAACA,MAAMA,CAACA,CAACA,EAAEA,CAACA,YAAYA,EAAEA,UAACA,CAAMA;gBAC9BA,CAACA,CAACA,cAAcA,EAAEA,CAACA;gBAEnBA,IAAIA,UAAUA,GAAGA,CAACA,CAACA,aAAaA,CAACA,OAAOA,CAACA,CAACA,CAACA,EACvCA,MAAMA,GAAGA,UAAUA,CAACA,KAAKA,EACzBA,MAAMA,GAAGA,UAAUA,CAACA,KAAKA,EACzBA,KAAKA,GAAGA,MAAMA,EACdA,KAAKA,GAAGA,MAAMA,EACdA,cAAcA,GAAGA,IAAIA,IAAIA,EAAEA,CAACA,OAAOA,EAAEA,CAACA;gBAE1CA;oBACIC,CAACA,CAACA,MAAMA,CAACA,CAACA,GAAGA,CAACA,WAAWA,EAAEA,WAAWA,CAACA,CAACA,GAAGA,CAACA,UAAUA,EAAEA,UAAUA,CAACA,CAACA;gBACxEA,CAACA;gBAAAD,CAACA;gBAEFA,oBAAoBA,QAAQA;oBACxBE,kBAAkBA,EAAEA,CAACA;oBAErBA,EAAEA,CAACA,CAACA,IAAIA,CAACA,GAAGA,CAACA,KAAKA,GAAGA,MAAMA,CAACA,GAAGA,EAAEA;wBAC7BA,IAAIA,CAACA,GAAGA,CAACA,KAAKA,GAAGA,MAAMA,CAACA,GAAGA,EAAEA,CAACA,CAACA,CAACA;wBAChCA,EAAEA,CAACA,CAACA,KAAKA,CAACA,SAASA,CAACA,CAACA,CAACA;4BAClBA,KAAKA,CAACA,KAAKA,EAAEA,CAACA;4BACdA,WAAWA,CAACA,KAAKA,EAAEA,KAAKA,EAAEA,EAAEA,EAAEA,IAAIA,EAAEA,IAAIA,CAACA,CAACA;wBAC9CA,CAACA;oBACLA,CAACA;oBAACA,IAAIA,CAACA,CAACA;wBACJA,EAAEA,CAACA,CAACA,KAAKA,CAACA,SAASA,CAACA,CAACA,CAACA;4BAClBA,KAAKA,CAACA,GAAGA,EAAEA,CAACA;wBAChBA,CAACA;wBAEDA,kCAAkCA;wBAClCA,kCAAkCA;wBAClCA,MAAMA,EAAEA,CAACA;oBACbA,CAACA;gBACLA,CAACA;gBAAAF,CAACA;gBAEFA,qBAAqBA,SAASA;oBAC1BG,IAAIA,SAASA,GAAGA,SAASA,CAACA,aAAaA,CAACA,OAAOA,CAACA,CAACA,CAACA,CAACA;oBACnDA,KAAKA,GAAGA,SAASA,CAACA,KAAKA,CAACA;oBACxBA,KAAKA,GAAGA,SAASA,CAACA,KAAKA,CAACA;oBAExBA,IAAIA,MAAMA,GAAGA,IAAIA,CAACA,GAAGA,CAACA,KAAKA,GAAGA,MAAMA,CAACA,CAACA;oBACtCA,IAAIA,MAAMA,GAAGA,IAAIA,CAACA,GAAGA,CAACA,KAAKA,GAAGA,MAAMA,CAACA,CAACA;oBACtCA,IAAIA,QAAQA,GAAGA,IAAIA,IAAIA,EAAEA,CAACA,OAAOA,EAAEA,GAAGA,cAAcA,CAACA;oBAErDA,EAAEA,CAACA,CAACA,QAAQA,GAAGA,EAAEA;wBACbA,CAACA,MAAMA,GAAGA,GAAGA,IAAIA,MAAMA,GAAGA,GAAGA,CAACA,CAACA,CAACA,CAACA;wBAEjCA,WAAWA,CAACA,KAAKA,GAAGA,IAAIA,CAACA,KAAKA,CAACA,MAAMA,GAAGA,CAACA,CAACA,EAAEA,KAAKA,GAAGA,IAAIA,CAACA,KAAKA,CAACA,MAAMA,GAAGA,CAACA,CAACA,EAAEA,EAAEA,EAAEA,IAAIA,EAAEA,IAAIA,CAACA,CAACA;oBAChGA,CAACA;oBAEDA,EAAEA,CAACA,CAACA,IAAIA,CAACA,GAAGA,CAACA,KAAKA,GAAGA,MAAMA,CAACA,GAAGA,EAAEA;wBAC7BA,IAAIA,CAACA,GAAGA,CAACA,KAAKA,GAAGA,MAAMA,CAACA,GAAGA,EAAEA,CAACA,CAACA,CAACA;wBAEhCA,WAAWA,CAACA,KAAKA,EAAEA,KAAKA,EAAEA,EAAEA,EAAEA,IAAIA,CAACA,CAACA;oBACxCA,CAACA;gBACLA,CAACA;gBAEDH,oCAAoCA;gBACpCA,oCAAoCA;gBAEpCA,CAACA,CAACA,MAAMA,CAACA,CAACA,EAAEA,CAACA,WAAWA,EAAEA,WAAWA,CAACA,CAACA,EAAEA,CAACA,UAAUA,EAAEA,UAAUA,CAACA,CAACA;YACtEA,CAACA,CAACA,CAACA;YAEHA,CAACA,CAACA,cAAcA,CAACA,CAACA,EAAEA,CAACA,YAAYA,EAAEA,UAAAA,CAACA;gBAChCA,KAAKA,CAACA,KAAKA,EAAEA,CAACA;YAClBA,CAACA,CAACA,CAACA;YAEHA,KAAKA,CAACA,SAASA,CAACA,EAAEA,CAACA,UAAAA,CAACA;gBAChBA,CAACA,CAACA,4BAA4BA,CAACA,CAACA,IAAIA,CAACA,GAAGA,GAAGA,CAACA,CAACA,SAASA,CAACA,CAACA;gBAExDA,CAACA,CAACA,YAAYA,CAACA,CAACA,GAAGA,CAACA,SAASA,EAAEA,OAAOA,CAACA,CAACA;gBACxCA,CAACA,CAACA,YAAYA,CAACA,CAACA,QAAQA,CAACA,mBAAmBA,CAACA,CAACA;gBAC9CA,UAAUA,CAACA;oBACPA,CAACA,CAACA,YAAYA,CAACA,CAACA,GAAGA,CAACA,SAASA,EAAEA,MAAMA,CAACA,CAACA;gBAC3CA,CAACA,EAAEA,kBAAkBA,CAACA,CAACA;YAC3BA,CAACA,CAACA,CAACA;YAEHA,KAAKA,CAACA,SAASA,CAACA,EAAEA,CAACA,UAAAA,CAACA;gBAChBA,CAACA,CAACA,eAAeA,CAACA,CAACA,IAAIA,CAACA,KAAKA,CAACA,KAAKA,CAACA,CAACA;gBAErCA,EAAEA,CAACA,CAACA,CAACA,CAACA,OAAOA,CAACA,CAACA,CAACA;oBACZA,CAACA,CAACA,mBAAmBA,CAACA,CAACA,IAAIA,CAACA,IAAIA,CAACA,CAACA;oBAElCA,CAACA,CAACA,YAAYA,CAACA,CAACA,GAAGA,CAACA,SAASA,EAAEA,OAAOA,CAACA,CAACA;oBACxCA,CAACA,CAACA,YAAYA,CAACA,CAACA,QAAQA,CAACA,sBAAsBA,CAACA,CAACA;oBACjDA,UAAUA,CAACA;wBACPA,CAACA,CAACA,YAAYA,CAACA,CAACA,GAAGA,CAACA,SAASA,EAAEA,MAAMA,CAACA,CAACA;oBAC3CA,CAACA,EAAEA,kBAAkBA,CAACA,CAACA;gBAC3BA,CAACA;gBAACA,IAAIA,CAACA,CAACA;oBACJA,CAACA,CAACA,OAAOA,CAACA,CAACA,GAAGA,CAACA,SAASA,EAAEA,OAAOA,CAACA,CAACA;oBACnCA,CAACA,CAACA,OAAOA,CAACA,CAACA,QAAQA,CAACA,mBAAmBA,CAACA,CAACA;oBACzCA,UAAUA,CAACA;wBACPA,CAACA,CAACA,OAAOA,CAACA,CAACA,GAAGA,CAACA,SAASA,EAAEA,MAAMA,CAACA,CAACA;oBACtCA,CAACA,EAAEA,kBAAkBA,CAACA,CAACA;gBAC3BA,CAACA;gBAEDA,CAACA,CAACA,MAAMA,CAACA,CAACA,GAAGA,CAACA,kBAAkBA,EAAEA,KAAKA,CAACA,YAAYA,CAACA,KAAKA,CAACA,CAACA;YAChEA,CAACA,CAACA,CAACA;YAEHA,KAAKA,CAACA,WAAWA,CAACA,EAAEA,CAACA,UAAAA,CAACA;gBAClBA,YAAYA,EAAEA,CAACA;gBAEfA,CAACA,CAACA,eAAeA,CAACA,CAACA,IAAIA,CAACA,KAAKA,CAACA,KAAKA,CAACA,CAACA;gBACrCA,CAACA,CAACA,eAAeA,CAACA,CAACA,IAAIA,CAACA,KAAKA,CAACA,QAAQA,CAACA,CAACA;gBACxCA,CAACA,CAACA,MAAMA,CAACA,CAACA,GAAGA,CAACA,kBAAkBA,EAAEA,KAAKA,CAACA,YAAYA,CAACA,KAAKA,CAACA,CAACA;gBAC5DA,CAACA,CAACA,cAAcA,CAACA,CAACA,IAAIA,EAAEA,CAACA;gBACzBA,CAACA,CAACA,wBAAwBA,CAACA,CAACA,IAAIA,CAACA,EAAEA,GAAGA,KAAKA,CAACA,YAAYA,CAACA,IAAIA,CAACA,CAACA;YACnEA,CAACA,CAACA,CAACA;YAEHA,KAAKA,CAACA,SAASA,CAACA,EAAEA,CAACA,UAAAA,CAACA;gBAChBA,CAACA,CAACA,eAAeA,CAACA,CAACA,IAAIA,CAACA,KAAKA,CAACA,KAAKA,CAACA,CAACA;gBACrCA,CAACA,CAACA,eAAeA,CAACA,CAACA,IAAIA,CAACA,KAAKA,CAACA,QAAQA,CAACA,CAACA;gBACxCA,+DAA+DA;gBAC/DA,YAAYA,EAAEA,CAACA;gBACfA,CAACA,CAACA,cAAcA,CAACA,CAACA,IAAIA,EAAEA,CAACA;YAC7BA,CAACA,CAACA,CAACA;YAEHA,KAAKA,CAACA,YAAYA,CAACA,EAAEA,CAACA,UAAAA,CAACA;gBACnBA,EAAEA,CAACA,CAACA,KAAKA,CAACA,QAAQA,GAAGA,CAACA,CAACA,CAACA,CAACA;oBACrBA,CAACA,CAACA,eAAeA,CAACA,CAACA,IAAIA,CAACA,KAAKA,CAACA,QAAQA,CAACA,OAAOA,CAACA,CAACA,CAACA,CAACA,CAACA;gBACvDA,CAACA;gBAACA,IAAIA,CAACA,CAACA;oBACJA,CAACA,CAACA,eAAeA,CAACA,CAACA,IAAIA,CAACA,KAAKA,CAACA,QAAQA,CAACA,OAAOA,CAACA,CAACA,CAACA,CAACA,CAACA;gBACvDA,CAACA;YACLA,CAACA,CAACA,CAACA;YAEHA,KAAKA,CAACA,gBAAgBA,CAACA,EAAEA,CAACA,UAAAA,CAACA;gBACvBA,EAAEA,CAACA,CAACA,CAACA,CAACA,SAASA,GAAGA,CAACA,CAACA,CAACA,CAACA;oBAClBA,gFAAgFA;oBAChFA,CAACA,CAACA,iBAAiBA,CAACA,CAACA,IAAIA,EAAEA,CAACA;gBAChCA,CAACA;gBAACA,IAAIA,CAACA,CAACA;oBACJA,CAACA,CAACA,iBAAiBA,CAACA,CAACA,IAAIA,EAAEA,CAACA;oBAC5BA,YAAYA,EAAEA,CAACA;gBACnBA,CAACA;gBAEDA,IAAIA,IAAIA,GAAGA,CAACA,CAACA,SAASA,KAAKA,CAACA,GAAGA,IAAIA,GAAGA,CAACA,CAACA,SAASA,CAACA,CAACA,yDAAyDA;gBAE5GA,CAACA,CAACA,mBAAmBA,CAACA,CAACA,IAAIA,CAACA,IAAIA,CAACA,CAACA;gBAClCA,CAACA,CAACA,YAAYA,CAACA,CAACA,GAAGA,CAACA,SAASA,EAAEA,OAAOA,CAACA,CAACA;gBACxCA,CAACA,CAACA,YAAYA,CAACA,CAACA,QAAQA,CAACA,mBAAmBA,CAACA,CAACA;gBAC9CA,UAAUA,CAACA;oBACPA,CAACA,CAACA,YAAYA,CAACA,CAACA,GAAGA,CAACA,SAASA,EAAEA,MAAMA,CAACA,CAACA;gBAC3CA,CAACA,EAAEA,kBAAkBA,CAACA,CAACA;gBAEvBA,CAACA,CAACA,MAAMA,CAACA,CAACA,GAAGA,CAACA,kBAAkBA,EAAEA,KAAKA,CAACA,YAAYA,CAACA,KAAKA,CAACA,CAACA;YAChEA,CAACA,CAACA,CAACA;YAEHA,YAAYA,EAAEA,CAACA;QACnBA,CAACA;QAEDF;YACIM,CAACA,CAACA,MAAMA,CAACA,CAACA,OAAOA,CAACA,SAASA,CAACA,CAACA;YAE7BA,CAACA,CAACA,MAAMA,CAACA,CAACA,OAAOA,CAACA;gBACdA,UAAUA,EAAEA,GAAGA;gBACfA,WAAWA,EAAEA,KAAKA;aACrBA,CAACA,CAACA;QACPA,CAACA;QAEDN;YACIO,CAACA,CAACA,MAAMA,CAACA,CAACA,MAAMA,CAACA,EAAEA,CAACA,CAACA;QACzBA,CAACA;QAEDP,qBAAqBA,CAASA,EAAEA,CAASA,EAAEA,MAAcA,EAAEA,QAAgBA,EAAEA,KAAsBA;YAAtBQ,qBAAsBA,GAAtBA,aAAsBA;YAC/FA,EAAEA,CAACA,CAACA,CAACA,KAAKA,IAAIA,cAAcA,GAAGA,UAAUA,CAACA,CAACA,CAACA;gBACxCA,EAAEA,CAACA,CAACA,aAAaA,CAACA,CAACA,CAACA;oBAChBA,YAAYA,CAACA,aAAaA,CAACA,CAACA;gBAChCA,CAACA;gBAEDA,aAAaA,GAAGA,UAAUA,CAACA;oBACvBA,CAACA,CAACA,MAAMA,CAACA,CAACA,OAAOA,CAACA,MAAMA,EAAEA,CAACA,EAAEA,CAACA,EAAEA,MAAMA,EAAEA,QAAQA,CAACA,CAACA;gBACtDA,CAACA,EAAEA,EAAEA,CAACA,CAACA;gBAEPA,MAAMA,CAACA;YACXA,CAACA;YAEDA,CAACA,CAACA,MAAMA,CAACA,CAACA,OAAOA,CAACA,MAAMA,EAAEA,CAACA,EAAEA,CAACA,EAAEA,MAAMA,EAAEA,QAAQA,CAACA,CAACA;YAClDA,cAAcA,EAAEA,CAACA;YAEjBA,UAAUA,CAACA;gBACPA,cAAcA,EAAEA,CAACA;YACrBA,CAACA,EAAEA,IAAIA,CAACA,CAACA;QACbA,CAACA;QAEDR,kBAAkBA,MAAMA,EAAEA,KAA2BA;YAA3BS,qBAA2BA,GAA3BA,SAAiBA,IAAIA,GAAGA,EAAEA,CAACA;YACjDA,IAAIA,OAAOA,EAAEA,SAASA,GAAGA,CAACA,IAAIA,IAAIA,EAC9BA,GAAGA,GAAGA,MAAMA,CAACA,qBAAqBA,CAACA;YACvCA,cAAcA,GAAGA;gBACbC,yCAAyCA;gBACzCA,EAAEA,CAACA,CAACA,OAAOA,KAAKA,KAAKA,CAACA,CAACA,CAACA;oBACpBA,GAAGA,CAACA,IAAIA,CAACA,CAACA;oBACVA,IAAIA,MAAMA,GAAGA,GAAGA,GAAGA,SAASA,CAACA;oBAC7BA,EAAEA,CAACA,CAACA,MAAMA,GAAGA,KAAKA,CAACA,CAACA,CAACA;wBACjBA,OAAOA,GAAGA,MAAMA,CAACA,MAAMA,CAACA,CAACA;oBAC7BA,CAACA;oBACDA,SAASA,GAAGA,GAAGA,CAACA;gBACpBA,CAACA;YACLA,CAACA;YACDD,IAAIA,CAACA,SAASA,CAACA,CAACA;QACpBA,CAACA;QAEDT;YACIW,0EAA0EA;QAC9EA,CAACA;QAEDX;YACIY,+EAA+EA;QACnFA,CAACA;IAELZ,CAACA,EAtOM,GAAG,KAAH,GAAG,QAsOT;IAED,OAAS,GAAG,CAAC","sourcesContent":["/// <reference path=\"typings/jquery/jquery.d.ts\" />\r\n/// <reference path=\"typings/jquery.ripples/jquery.ripples.d.ts\" />\r\n/// <reference path=\"typings/ripple/ripple.d.ts\" />\r\n\r\nimport {Frame} from \"./Frame\";\r\nimport * as $ from \"jquery\";\r\n\r\nmodule App {\r\n    var currentRipples = 0;\r\n    var maxRipples = 30;\r\n    var skipRipple = false;\r\n    var rippleTimeout = null;\r\n\r\n    export function initialize() {\r\n        document.addEventListener(\"deviceready\", onDeviceReady, false);\r\n    }\r\n\r\n    function onDeviceReady() {\r\n        // Handle the Cordova pause and resume events\r\n        document.addEventListener(\"pause\", onPause, false);\r\n        document.addEventListener(\"resume\", onResume, false);\r\n\r\n        var popupmesssagedelay = 750;\r\n\r\n        var frame = new Frame();\r\n\r\n        $(\"body\").css(\"background-color\", frame.CurrentColor.color);\r\n        // $(\"#score > span\").text(frame.Score);\r\n        // $(\"#timer > span\").text(frame.TimeLeft);\r\n\r\n        $(\"body\").on(\"touchstart\", (e: any) => {\r\n            e.preventDefault();\r\n\r\n            var touchStart = e.originalEvent.touches[0],\r\n                startX = touchStart.pageX,\r\n                startY = touchStart.pageY,\r\n                lastX = startX,\r\n                lastY = startY,\r\n                touchStartTime = new Date().getTime();\r\n\r\n            function removeTouchHandler() {\r\n                $(\"body\").off(\"touchmove\", moveHandler).off(\"touchend\", endHandler);\r\n            };\r\n\r\n            function endHandler(endEvent) {\r\n                removeTouchHandler();\r\n\r\n                if (Math.abs(lastX - startX) > 75 ||\r\n                    Math.abs(lastY - startY) > 75) {\r\n                    if (frame.IsStarted) {\r\n                        frame.swipe();\r\n                        waterRipple(lastX, lastY, 15, 0.05, true);\r\n                    }\r\n                } else {\r\n                    if (frame.IsStarted) {\r\n                        frame.tap();\r\n                    }\r\n\r\n                    // ripple(lastX, lastY, 20, 0.04);\r\n                    // ripple(lastX, lastY, 25, 0.06);\r\n                    ripple();\r\n                }\r\n            };\r\n\r\n            function moveHandler(moveEvent) {\r\n                var touchMove = moveEvent.originalEvent.touches[0];\r\n                lastX = touchMove.pageX;\r\n                lastY = touchMove.pageY;\r\n\r\n                var movedX = Math.abs(lastX - startX);\r\n                var movedY = Math.abs(lastY - startY);\r\n                var timeDiff = new Date().getTime() - touchStartTime;\r\n\r\n                if (timeDiff < 50 &&\r\n                    (movedX > 100 || movedY > 100)) {\r\n                    \r\n                    waterRipple(lastX - Math.floor(movedX / 2), lastY - Math.floor(movedY / 2), 15, 0.05, true);\r\n                }\r\n\r\n                if (Math.abs(lastX - startX) > 10 ||\r\n                    Math.abs(lastY - startY) > 10) {\r\n\r\n                    waterRipple(lastX, lastY, 15, 0.05);\r\n                }\r\n            }\r\n\r\n            // ripple(startX, startY, 25, 0.06);\r\n            // ripple(startX, startY, 30, 0.08);\r\n            \r\n            $(\"body\").on(\"touchmove\", moveHandler).on(\"touchend\", endHandler);\r\n        });\r\n\r\n        $(\"#startbutton\").on(\"touchstart\", e => {\r\n            frame.start();\r\n        });\r\n\r\n        frame.TimeBonus.on(x => {\r\n            $(\"#timebonus .message > span\").text(\"+\" + x.ExtraTime);\r\n\r\n            $(\"#timebonus\").css(\"display\", \"block\");\r\n            $(\"#timebonus\").addClass(\"animated bounceIn\");\r\n            setTimeout(() => {\r\n                $(\"#timebonus\").css(\"display\", \"none\");\r\n            }, popupmesssagedelay);\r\n        });\r\n\r\n        frame.NextFrame.on(x => {\r\n            $(\"#score > span\").text(frame.Score);\r\n\r\n            if (x.Correct) {\r\n                $(\"#plusscore > span\").text(\"+1\");\r\n\r\n                $(\"#plusscore\").css(\"display\", \"block\");\r\n                $(\"#plusscore\").addClass(\"animated fadeOutDown\");\r\n                setTimeout(() => {\r\n                    $(\"#plusscore\").css(\"display\", \"none\");\r\n                }, popupmesssagedelay);\r\n            } else {\r\n                $(\"#oops\").css(\"display\", \"block\");\r\n                $(\"#oops\").addClass(\"animated bounceIn\");\r\n                setTimeout(() => {\r\n                    $(\"#oops\").css(\"display\", \"none\");\r\n                }, popupmesssagedelay);\r\n            }\r\n\r\n            $(\"body\").css(\"background-color\", frame.CurrentColor.color);\r\n        });\r\n\r\n        frame.GameStarted.on(e => {\r\n            resetRipples();\r\n\r\n            $(\"#score > span\").text(frame.Score);\r\n            $(\"#timer > span\").text(frame.TimeLeft);\r\n            $(\"body\").css(\"background-color\", frame.CurrentColor.color);\r\n            $(\"#startscreen\").hide();\r\n            $(\"#currentforbiddencolor\").html(\"\" + frame.CurrentColor.name);\r\n        });\r\n\r\n        frame.GameEnded.on(e => {\r\n            $(\"#score > span\").text(frame.Score);\r\n            $(\"#timer > span\").text(frame.TimeLeft);\r\n            // $(\"body\").css(\"background-color\", frame.CurrentColor.color);\r\n            resetRipples();\r\n            $(\"#startscreen\").show();\r\n        });\r\n\r\n        frame.TimerUpdated.on(e => {\r\n            if (frame.TimeLeft < 3) {\r\n                $(\"#timer > span\").text(frame.TimeLeft.toFixed(1));\r\n            } else {\r\n                $(\"#timer > span\").text(frame.TimeLeft.toFixed(0));\r\n            }\r\n        });\r\n\r\n        frame.CountDownUpdated.on(e => {\r\n            if (e.CountDown > 0) {\r\n                // $('#forbiddencolor').html('Forbidden color<br />' + frame.CurrentColor.name);\r\n                $(\"#forbiddencolor\").show();\r\n            } else {\r\n                $(\"#forbiddencolor\").hide();\r\n                resetRipples();\r\n            }\r\n\r\n            var text = e.CountDown === 0 ? \"Go\" : e.CountDown; // (e.CountDown === 4 ? \"Forbidden color\" : e.CountDown);\r\n\r\n            $(\"#countdown > span\").text(text);\r\n            $(\"#countdown\").css(\"display\", \"block\");\r\n            $(\"#countdown\").addClass(\"animated bounceIn\");\r\n            setTimeout(() => {\r\n                $(\"#countdown\").css(\"display\", \"none\");\r\n            }, popupmesssagedelay);\r\n\r\n            $(\"body\").css(\"background-color\", frame.CurrentColor.color);\r\n        });\r\n\r\n        resetRipples();\r\n    }\r\n\r\n    function resetRipples() {\r\n        $('body').ripples('destroy');\r\n\r\n        $('body').ripples({\r\n            resolution: 256,\r\n            interactive: false\r\n        });\r\n    }\r\n\r\n    function ripple() {\r\n        $(\"body\").ripple({});\r\n    }\r\n\r\n    function waterRipple(x: number, y: number, radius: number, strength: number, force: boolean = false) {\r\n        if (!force && currentRipples > maxRipples) {\r\n            if (rippleTimeout) {\r\n                clearTimeout(rippleTimeout);\r\n            }\r\n\r\n            rippleTimeout = setTimeout(() => {\r\n                $(\"body\").ripples(\"drop\", x, y, radius, strength);\r\n            }, 50);\r\n\r\n            return;\r\n        }\r\n\r\n        $(\"body\").ripples(\"drop\", x, y, radius, strength);\r\n        currentRipples++;\r\n\r\n        setTimeout(() => {\r\n            currentRipples--;\r\n        }, 1000);\r\n    }\r\n\r\n    function animLoop(render, speed: number = (1000 / 60)) {\r\n        var running, lastFrame = +new Date,\r\n            raf = window.requestAnimationFrame;\r\n        function loop(now) {\r\n            // stop the loop if render returned false\r\n            if (running !== false) {\r\n                raf(loop);\r\n                var deltaT = now - lastFrame;\r\n                if (deltaT < speed) {\r\n                    running = render(deltaT);\r\n                }\r\n                lastFrame = now;\r\n            }\r\n        }\r\n        loop(lastFrame);\r\n    }\r\n\r\n    function onPause() {\r\n        // TODO: This application has been suspended. Save application state here.\r\n    }\r\n\r\n    function onResume() {\r\n        // TODO: This application has been reactivated. Restore application state here.\r\n    }\r\n\r\n}\r\n\r\nexport = App;"]}