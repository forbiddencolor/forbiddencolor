{"version":3,"file":"Frame.js","sourceRoot":"","sources":["../../scripts/Frame.ts"],"names":["NextFrameEventArgs","NextFrameEventArgs.constructor","TimeBonusEventArgs","TimeBonusEventArgs.constructor","GameEndedEventArgs","GameEndedEventArgs.constructor","CountDownEventArgs","CountDownEventArgs.constructor","GameStartedEventArgs","GameStartedEventArgs.constructor","TimerUpdatedEventArgs","TimerUpdatedEventArgs.constructor","Color","Color.constructor","Frame","Frame.constructor","Frame.NextFrame","Frame.TimeBonus","Frame.GameStarted","Frame.GameEnded","Frame.TimerUpdated","Frame.CountDownUpdated","Frame.start","Frame.endGame","Frame.swipe","Frame.tap","Frame.pickColor","Frame.success","Frame.missClick","Frame.updateInterval","Frame.gameLoop","Frame.animLoop","Frame.animLoop.timestamp","Frame.animLoop.loop"],"mappings":"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A,WAAWA,CAACA,OAAOA,CAACA,IAAIA,kBAAkBA,CAACA,KAAIA,CAACA,SAASA,CAACA,CAACA,CAACA;YACrEA,CAACA,EAAEA,IAAIA,CAACA,CAACA;YAETA,IAAIA,CAACA,aAAaA,CAACA,OAAOA,CAACA,IAAIA,oBAAoBA,EAAEA,CAACA,CAACA;YACvDA,IAAIA,CAACA,WAAWA,CAACA,OAAOA,CAACA,IAAIA,kBAAkBA,CAACA,IAAIA,CAACA,SAASA,CAACA,CAACA,CAACA;QACrEA,CAACA;QAEMR,uBAAOA,GAAdA;YACIS,IAAIA,KAAKA,GAAGA,IAAIA,CAACA,KAAKA,CAACA;YAEvBA,IAAIA,CAACA,QAAQA,GAAGA,CAACA,CAACA;YAClBA,gCAAgCA;YAChCA,IAAIA,CAACA,SAASA,GAAGA,KAAKA,CAACA;YACvBA,IAAIA,CAACA,SAASA,GAAGA,KAAKA,CAACA;YACvBA,IAAIA,CAACA,WAAWA,CAACA,OAAOA,CAACA,IAAIA,kBAAkBA,CAACA,KAAKA,CAACA,CAACA,CAACA;QAC5DA,CAACA;QAEMT,qBAAKA,GAAZA;YACIU,EAAEA,CAACA,CAACA,CAACA,IAAIA,CAACA,SAASA,CAACA;gBAACA,MAAMA,CAACA;YAE5BA,EAAEA,CAACA,CAACA,IAAIA,CAACA,YAAYA,KAAKA,IAAIA,CAACA,cAAcA,CAACA,CAACA,CAACA;gBAC5CA,IAAIA,CAACA,OAAOA,EAAEA,CAACA;YACnBA,CAACA;YAACA,IAAIA,CAACA,CAACA;gBACJA,IAAIA,CAACA,SAASA,EAAEA,CAACA;YACrBA,CAACA;QACLA,CAACA;QAEMV,mBAAGA,GAAVA;YACIW,EAAEA,CAACA,CAACA,CAACA,IAAIA,CAACA,SAASA,CAACA;gBAACA,MAAMA,CAACA;YAE5BA,EAAEA,CAACA,CAACA,IAAIA,CAACA,YAAYA,KAAKA,IAAIA,CAACA,cAAcA,CAACA,CAACA,CAACA;gBAC5CA,IAAIA,CAACA,SAASA,EAAEA,CAACA;YACrBA,CAACA;YAACA,IAAIA,CAACA,CAACA;gBACJA,IAAIA,CAACA,OAAOA,EAAEA,CAACA;YACnBA,CAACA;QACLA,CAACA;QAEMX,yBAASA,GAAhBA;YACIY,IAAIA,GAAGA,GAAGA,IAAIA,CAACA,KAAKA,CAACA,CAACA,IAAIA,CAACA,MAAMA,EAAEA,GAAGA,IAAIA,CAACA,cAAcA,CAACA,MAAMA,CAACA,CAACA,CAACA;YACnEA,IAAIA,KAAKA,GAAGA,IAAIA,CAACA,cAAcA,CAACA,GAAGA,CAACA,CAACA;YACrCA,MAAMA,CAACA,KAAKA,CAACA;QACjBA,CAACA;QAEDZ,uBAAOA,GAAPA;YACIa,IAAIA,CAACA,KAAKA,EAAEA,CAACA;YACbA,IAAIA,CAACA,aAAaA,EAAEA,CAACA;YAErBA,EAAEA,CAACA,CAACA,IAAIA,CAACA,aAAaA,GAAGA,CAACA,KAAKA,CAACA,CAACA,CAACA,CAACA;gBAC/BA,IAAIA,CAACA,QAAQA,IAAIA,CAACA,CAACA;gBACnBA,IAAIA,CAACA,WAAWA,CAACA,OAAOA,CAACA,IAAIA,kBAAkBA,CAACA,CAACA,CAACA,CAACA,CAACA;YACxDA,CAACA;YAEDA,IAAIA,CAACA,YAAYA,GAAGA,IAAIA,CAACA,SAASA,EAAEA,CAACA;YACrCA,IAAIA,CAACA,WAAWA,CAACA,OAAOA,CAACA,IAAIA,kBAAkBA,CAACA,IAAIA,CAACA,CAACA,CAACA;QAC3DA,CAACA;QAEDb,yBAASA,GAATA;YACIc,IAAIA,CAACA,KAAKA,GAAGA,CAACA,CAACA;YACfA,IAAIA,CAACA,aAAaA,GAAGA,CAACA,CAACA;YACvBA,IAAIA,CAACA,YAAYA,GAAGA,IAAIA,CAACA,SAASA,EAAEA,CAACA;YACrCA,IAAIA,CAACA,WAAWA,CAACA,OAAOA,CAACA,IAAIA,kBAAkBA,CAACA,KAAKA,CAACA,CAACA,CAACA;QAC5DA,CAACA;QAEDd,8BAAcA,GAAdA;YACIe,IAAIA,CAACA,QAAQA,IAAIA,GAAGA,CAACA;YAErBA,EAAEA,CAACA,CAACA,IAAIA,CAACA,QAAQA,IAAIA,CAACA,CAACA,CAACA,CAACA;gBACrBA,IAAIA,CAACA,OAAOA,EAAEA,CAACA;gBACfA,MAAMA,CAACA;YACXA,CAACA;YAEDA,IAAIA,CAACA,cAAcA,CAACA,OAAOA,CAACA,IAAIA,qBAAqBA,EAAEA,CAACA,CAACA;QAC7DA,CAACA;QAEDf,wBAAQA,GAARA,UAASA,KAAaA;YAClBgB,EAAEA,CAACA,CAACA,CAACA,IAAIA,CAACA,SAASA,CAACA;gBAACA,MAAMA,CAACA,KAAKA,CAACA;YAElCA,IAAIA,CAACA,QAAQA,IAAIA,KAAKA,GAAGA,IAAIA,CAACA;YAE9BA,EAAEA,CAACA,CAACA,IAAIA,CAACA,QAAQA,IAAIA,CAACA,CAACA,CAACA,CAACA;gBACrBA,IAAIA,CAACA,OAAOA,EAAEA,CAACA;gBACfA,MAAMA,CAACA,KAAKA,CAACA;YACjBA,CAACA;YAEDA,IAAIA,CAACA,cAAcA,CAACA,OAAOA,CAACA,IAAIA,qBAAqBA,EAAEA,CAACA,CAACA;YACzDA,MAAMA,CAACA,IAAIA,CAACA;QAChBA,CAACA;QAEDhB,wBAAQA,GAARA,UAASA,MAAgBA,EAAEA,KAA2BA;YAA3BiB,qBAA2BA,GAA3BA,SAAiBA,IAAIA,GAAGA,EAAEA,CAACA;YAClDA;gBACIC,MAAMA,CAACA,MAAMA,CAACA,WAAWA,IAAIA,MAAMA,CAACA,WAAWA,CAACA,GAAGA,GAAGA,MAAMA,CAACA,WAAWA,CAACA,GAAGA,EAAEA,GAAGA,CAACA,IAAIA,IAAIA,CAACA;YAC/FA,CAACA;YAEDD,IAAIA,OAAOA,EAAEA,SAASA,GAAGA,SAASA,EAAEA,EAChCA,GAAGA,GAAGA,MAAMA,CAACA,qBAAqBA,EAClCA,IAAIA,GAAGA,IAAIA,CAACA;YAChBA,cAAcA,GAAGA;gBACbE,EAAEA,CAACA,CAACA,OAAOA,KAAKA,KAAKA,CAACA,CAACA,CAACA;oBACpBA,GAAGA,CAACA,IAAIA,CAACA,CAACA;oBACVA,IAAIA,OAAOA,GAAGA,IAAIA,CAACA,GAAGA,CAACA,IAAIA,EAAEA,GAAGA,GAAGA,SAASA,CAACA,CAACA;oBAE9CA,EAAEA,CAACA,CAACA,CAACA,KAAKA,IAAIA,CAACA,IAAIA,OAAOA,GAAGA,KAAKA,CAACA,CAACA,CAACA,CAACA;wBAClCA,SAASA,GAAGA,GAAGA,GAAGA,CAACA,OAAOA,GAAGA,KAAKA,CAACA,CAACA;wBACpCA,OAAOA,GAAGA,MAAMA,CAACA,IAAIA,CAACA,IAAIA,CAACA,CAACA,OAAOA,CAACA,CAACA;oBACzCA,CAACA;gBACLA,CAACA;YACLA,CAACA;YAEDF,IAAIA,CAACA,SAASA,CAACA,CAACA;QACpBA,CAACA;QACLjB,YAACA;IAADA,CAACA,AA5LD,IA4LC;IA5LY,aAAK,QA4LjB,CAAA","sourcesContent":["\"use strict\";\r\n\r\nimport {ILiteEvent, LiteEvent} from './LiteEvents';\r\n\r\nexport class NextFrameEventArgs {\r\n    public Correct: boolean;\r\n\r\n    constructor(correct: boolean) {\r\n        this.Correct = correct;\r\n    }\r\n}\r\n\r\nexport class TimeBonusEventArgs {\r\n    public ExtraTime: number;\r\n\r\n    constructor(extraTime: number) {\r\n        this.ExtraTime = extraTime;\r\n    }\r\n}\r\n\r\nexport class GameEndedEventArgs {\r\n    public Score: number;\r\n\r\n    constructor(score: number) {\r\n        this.Score = score;\r\n    }\r\n}\r\n\r\nexport class CountDownEventArgs {\r\n    public CountDown: number;\r\n\r\n    constructor(countDown: number) {\r\n        this.CountDown = countDown;\r\n    }\r\n}\r\n\r\nexport class GameStartedEventArgs {\r\n\r\n    constructor() {\r\n    }\r\n}\r\n\r\nexport class TimerUpdatedEventArgs {\r\n\r\n    constructor() {\r\n    }\r\n}\r\n\r\nexport class Color {\r\n    public name: string;\r\n    public color: string;\r\n}\r\n\r\nexport class Frame {\r\n    private _interval: any;\r\n    private onNextFrame = new LiteEvent<NextFrameEventArgs>();\r\n    private onTimeBonus = new LiteEvent<TimeBonusEventArgs>();\r\n    private onGameStarted = new LiteEvent<GameStartedEventArgs>();\r\n    private onGameEnded = new LiteEvent<GameEndedEventArgs>();\r\n    private onTimerUpdated = new LiteEvent<TimerUpdatedEventArgs>();\r\n    private onCountDown = new LiteEvent<CountDownEventArgs>();\r\n    private _countdownInterval: any;\r\n\r\n    public Score: number;\r\n    public CurrentColor: Color;\r\n    public ForbiddenColor: Color;\r\n    public PossibleColors: Color[];\r\n    public IsStarted: boolean;\r\n    public IsPlaying: boolean;\r\n    public TimeLeft: number;\r\n    public CurrentStreak: number;\r\n    public CountDown: number;\r\n\r\n    public get NextFrame(): ILiteEvent<NextFrameEventArgs> { return this.onNextFrame; }\r\n    public get TimeBonus(): ILiteEvent<TimeBonusEventArgs> { return this.onTimeBonus; }\r\n    public get GameStarted(): ILiteEvent<GameStartedEventArgs> { return this.onGameStarted; }\r\n    public get GameEnded(): ILiteEvent<GameEndedEventArgs> { return this.onGameEnded; }\r\n    public get TimerUpdated(): ILiteEvent<TimerUpdatedEventArgs> { return this.onTimerUpdated; }\r\n    public get CountDownUpdated(): ILiteEvent<CountDownEventArgs> { return this.onCountDown; }\r\n\r\n    constructor() {\r\n        this.PossibleColors = [\r\n            { color: \"#10E5E5\", name: \"Cyan\" }, // \r\n            { color: \"#FF7F00\", name: \"Orange\" }, // orange\r\n            { color: \"#AA2AFF\", name: \"Purple\" }, // purple\r\n            { color: \"#00CC00\", name: \"Green\" }, // green\r\n            { color: \"#FF0000\", name: \"Red\" }, // red\r\n            { color: \"#002AFF\", name: \"Blue\" }, // blue\r\n            { color: \"#FF55FF\", name: \"Pink\" } // pink\r\n        ];\r\n\r\n        this.CurrentColor = this.pickColor();\r\n        this.ForbiddenColor = this.CurrentColor;\r\n        this.CurrentStreak = 0;\r\n        this.CountDown = 0;\r\n        this.Score = 0;\r\n        this.TimeLeft = 0;\r\n    }\r\n\r\n    public start() {\r\n        if (this.IsStarted) return;\r\n\r\n        this.IsStarted = true;\r\n        this.IsPlaying = false;\r\n        this.CurrentStreak = 0;\r\n        this.Score = 0;\r\n        this.TimeLeft = 10;\r\n\r\n        this.ForbiddenColor = this.pickColor();\r\n        this.CurrentColor = this.ForbiddenColor;\r\n\r\n        this.CountDown = 2;\r\n\r\n        if (this._countdownInterval) {\r\n            clearInterval(this._countdownInterval);\r\n        }\r\n\r\n        if (this._interval) {\r\n            clearInterval(this._interval);\r\n        }\r\n\r\n        this._countdownInterval = setInterval(() => {\r\n            this.CountDown -= 1;\r\n            if (this.CountDown <= 0) {\r\n                clearInterval(this._countdownInterval);\r\n                this.CurrentColor = this.pickColor();\r\n                this.IsPlaying = true;\r\n                this.animLoop(this.gameLoop, 100);\r\n                //this._interval = setInterval(() => { this.updateInterval(); }, 100);\r\n            }\r\n\r\n            this.onCountDown.trigger(new CountDownEventArgs(this.CountDown));\r\n        }, 1000);\r\n\r\n        this.onGameStarted.trigger(new GameStartedEventArgs());\r\n        this.onCountDown.trigger(new CountDownEventArgs(this.CountDown));\r\n    }\r\n\r\n    public endGame() {\r\n        var score = this.Score;\r\n\r\n        this.TimeLeft = 0;\r\n        //clearInterval(this._interval);\r\n        this.IsStarted = false;\r\n        this.IsPlaying = false;\r\n        this.onGameEnded.trigger(new GameEndedEventArgs(score));\r\n    }\r\n\r\n    public swipe() {\r\n        if (!this.IsPlaying) return;\r\n\r\n        if (this.CurrentColor === this.ForbiddenColor) {\r\n            this.success();\r\n        } else {\r\n            this.missClick();\r\n        }\r\n    }\r\n\r\n    public tap() {\r\n        if (!this.IsPlaying) return;\r\n\r\n        if (this.CurrentColor === this.ForbiddenColor) {\r\n            this.missClick();\r\n        } else {\r\n            this.success();\r\n        }\r\n    }\r\n\r\n    public pickColor(): Color {\r\n        var num = Math.floor((Math.random() * this.PossibleColors.length));\r\n        var color = this.PossibleColors[num];\r\n        return color;\r\n    }\r\n\r\n    success() {\r\n        this.Score++;\r\n        this.CurrentStreak++;\r\n\r\n        if (this.CurrentStreak % 5 === 0) {\r\n            this.TimeLeft += 1;\r\n            this.onTimeBonus.trigger(new TimeBonusEventArgs(1));\r\n        }\r\n\r\n        this.CurrentColor = this.pickColor();\r\n        this.onNextFrame.trigger(new NextFrameEventArgs(true));\r\n    }\r\n\r\n    missClick() {\r\n        this.Score = 0;\r\n        this.CurrentStreak = 0;\r\n        this.CurrentColor = this.pickColor();\r\n        this.onNextFrame.trigger(new NextFrameEventArgs(false));\r\n    }\r\n\r\n    updateInterval() {\r\n        this.TimeLeft -= 0.1;\r\n\r\n        if (this.TimeLeft <= 0) {\r\n            this.endGame();\r\n            return;\r\n        }\r\n\r\n        this.onTimerUpdated.trigger(new TimerUpdatedEventArgs());\r\n    }\r\n\r\n    gameLoop(delta: number) {\r\n        if (!this.IsStarted) return false;\r\n\r\n        this.TimeLeft -= delta / 1000;\r\n\r\n        if (this.TimeLeft <= 0) {\r\n            this.endGame();\r\n            return false;\r\n        }\r\n\r\n        this.onTimerUpdated.trigger(new TimerUpdatedEventArgs());\r\n        return true;\r\n    }\r\n\r\n    animLoop(render: Function, speed: number = (1000 / 30)) {\r\n        function timestamp() {\r\n            return window.performance && window.performance.now ? window.performance.now() : +new Date;\r\n        }\r\n\r\n        var running, lastFrame = timestamp(),\r\n            raf = window.requestAnimationFrame,\r\n            that = this;\r\n        function loop(now) {\r\n            if (running !== false) {\r\n                raf(loop);\r\n                var elapsed = Math.min(1000, now - lastFrame);\r\n\r\n                if ((speed <= 0 || elapsed > speed)) {\r\n                    lastFrame = now - (elapsed % speed);\r\n                    running = render.bind(that)(elapsed);\r\n                }\r\n            }\r\n        }\r\n\r\n        loop(lastFrame);\r\n    }\r\n}\r\n\r\n"]}