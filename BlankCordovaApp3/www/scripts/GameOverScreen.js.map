{"version":3,"file":"GameOverScreen.js","sourceRoot":"","sources":["../../scripts/GameOverScreen.ts"],"names":["GameOverScreen","GameOverScreen.constructor","GameOverScreen.show","GameOverScreen.hide","GameOverScreen.updateHighScores","GameOverScreen.saveScore"],"mappings":"AAAA,uDAAuD;;;;;;;IAEvD,YAAY,CAAC;IAQb,IAAI,MAAM,GAAG,IAAI,MAAM,CAAC,gBAAgB,EAAE,CAAC;IAE3C;QAAoCA,kCAAMA;QAMtCA,wBAAYA,MAAaA;YACrBC,kBAAMA,gBAAgBA,CAACA,CAACA;YANrBA,eAAUA,GAAyFA,EAAEA,CAACA,eAAeA,EAAEA,CAACA;YACxHA,UAAKA,GAA2DA,EAAEA,CAACA,UAAUA,EAAEA,CAACA;YAChFA,gBAAWA,GAA6DA,EAAEA,CAACA,UAAUA,EAAEA,CAACA;YACxFA,SAAIA,GAA2DA,EAAEA,CAACA,UAAUA,EAAEA,CAACA;YAKlFA,IAAIA,CAACA,MAAMA,GAAGA,MAAMA,CAACA;YAErBA,IAAIA,CAACA,gBAAgBA,EAAEA,CAACA;YACxBA,EAAEA,CAACA,aAAaA,CAACA,IAAIA,EAAEA,CAACA,CAACA,iBAAiBA,CAACA,CAACA,CAACA,CAACA,CAACA,CAACA;QACpDA,CAACA;QAEMD,6BAAIA,GAAXA;YACIE,IAAIA,CAACA,gBAAgBA,EAAEA,CAACA;YACxBA,gBAAKA,CAACA,IAAIA,WAAEA,CAACA;QACjBA,CAACA;QAEMF,6BAAIA,GAAXA;YACIG,gBAAKA,CAACA,IAAIA,WAAEA,CAACA;YACbA,aAAaA,CAACA,SAASA,CAACA,OAAOA,CAACA,CAACA,IAAIA,EAAEA,CAACA;QAC5CA,CAACA;QAEOH,yCAAgBA,GAAxBA;YAAAI,iBAICA;YAHGA,IAAIA,CAACA,UAAUA,CAACA,SAASA,EAAEA,CAACA;YAC5BA,MAAMA,CAACA,aAAaA,EAAEA,CAACA,OAAOA,CAACA,UAAAA,CAACA,IAAGA,OAAAA,KAAIA,CAACA,UAAUA,CAACA,IAAIA,CAACA,CAACA,CAACA,EAAvBA,CAAuBA,CAACA,CAACA;YAC5DA,IAAIA,CAACA,WAAWA,CAACA,MAAMA,CAACA,WAAWA,CAACA,IAAIA,CAACA,KAAKA,EAAEA,CAACA,CAACA,CAACA;QACvDA,CAACA;QAEMJ,kCAASA,GAAhBA;YACIK,EAAEA,CAACA,CAACA,IAAIA,CAACA,IAAIA,EAAEA,CAACA,MAAMA,GAAGA,CAACA,CAACA;gBAACA,MAAMA,CAACA;YAEnCA,MAAMA,CAACA,QAAQA,CAACA,IAAIA,CAACA,IAAIA,EAAEA,EAAEA,IAAIA,CAACA,KAAKA,EAAEA,CAACA,CAACA;YAC3CA,IAAIA,CAACA,IAAIA,EAAEA,CAACA;QAChBA,CAACA;QAGLL,qBAACA;IAADA,CAACA,AAvCD,EAAoC,eAAM,EAuCzC;IAvCY,sBAAc,iBAuC1B,CAAA","sourcesContent":["/// <reference path=\"typings/knockout/knockout.d.ts\" />\r\n\r\n\"use strict\";\r\n\r\nimport {Frame} from \"Frame\";\r\nimport {Screen} from \"Screen\";\r\nimport * as Scores from \"HighScores\";\r\nimport * as ScreenManager from \"ScreenManager\";\r\nimport * as ko from \"knockout\";\r\n\r\nvar scores = new Scores.HighScoreStorage();\r\n\r\nexport class GameOverScreen extends Screen {\r\n    public highScores: KnockoutObservableArray<Scores.HighScore> = <KnockoutObservableArray<Scores.HighScore>>ko.observableArray();\r\n    public score: KnockoutObservable<number> = <KnockoutObservable<number>>ko.observable();\r\n    public isHighScore: KnockoutObservable<boolean> = <KnockoutObservable<boolean>>ko.observable();\r\n    public name: KnockoutObservable<string> = <KnockoutObservable<string>>ko.observable();\r\n\r\n    constructor(engine: Frame) {\r\n        super(\"gameoverscreen\");\r\n\r\n        this.engine = engine;\r\n\r\n        this.updateHighScores();\r\n        ko.applyBindings(this, $(\"#gameoverscreen\")[0]);\r\n    }\r\n\r\n    public show() {\r\n        this.updateHighScores();\r\n        super.show();\r\n    }\r\n\r\n    public hide() {\r\n        super.hide();\r\n        ScreenManager.getScreen('start').show();\r\n    }\r\n\r\n    private updateHighScores() {\r\n        this.highScores.removeAll();\r\n        scores.getHighScores().forEach(e=> this.highScores.push(e));\r\n        this.isHighScore(scores.isHighScore(this.score()));\r\n    }\r\n\r\n    public saveScore() {\r\n        if (this.name().length < 3) return;\r\n\r\n        scores.addScore(this.name(), this.score());\r\n        this.hide();\r\n    }\r\n\r\n    engine: Frame;\r\n}"]}